<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Gaxx Monitoring Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; }
        .card { background: white; padding: 20px; margin: 10px 0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .status-healthy { color: #28a745; }
        .status-degraded { color: #ffc107; }
        .status-unhealthy { color: #dc3545; }
        .metric { margin: 5px 0; padding: 10px; background: #f8f9fa; border-radius: 4px; }
        .metric-name { font-weight: bold; color: #495057; }
        .metric-value { float: right; color: #007bff; }
        .refresh-btn { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; }
        .refresh-btn:hover { background: #0056b3; }
        h1 { color: #343a40; }
        h2 { color: #495057; border-bottom: 2px solid #dee2e6; padding-bottom: 10px; }
    </style>
    <script>
        function refreshData() { location.reload(); }
        async function loadMetrics() {
            try {
                const resp = await fetch('/api/metrics');
                const metrics = await resp.json();
                updateMetricsDisplay(metrics);
            } catch (e) { console.error('metrics', e); }
        }
        async function loadHealth() {
            try {
                const resp = await fetch('/api/health');
                const health = await resp.json();
                updateHealthDisplay(health);
            } catch (e) { console.error('health', e); }
        }
        function updateMetricsDisplay(metrics) {
            const container = document.getElementById('metrics-container');
            container.innerHTML = '';
            (metrics || []).forEach(m => {
                const div = document.createElement('div');
                div.className = 'metric';
                div.innerHTML = '<span class="metric-name">' + m.name + '</span><span class="metric-value">' + m.value + '</span>';
                container.appendChild(div);
            });
        }
        function updateHealthDisplay(health) {
            const container = document.getElementById('health-container');
            const statusClass = 'status-' + health.status;
            container.innerHTML = '<h3 class="' + statusClass + '">System Status: ' + String(health.status || '').toUpperCase() + '</h3>';
            (health.checks || []).forEach(check => {
                const div = document.createElement('div');
                div.className = 'metric';
                div.innerHTML = '<span class="metric-name ' + 'status-' + check.status + '">' + check.name + '</span><span class="metric-value">' + check.status + '</span>';
                container.appendChild(div);
            });
        }
        setInterval(() => { loadMetrics(); loadHealth(); }, 5000);
        window.onload = () => { loadMetrics(); loadHealth(); };
    </script>
</head>
<body>
    <div class="container">
        <h1>üöÄ Gaxx Monitoring Dashboard</h1>
        <div class="card">
            <h2>System Health</h2>
            <button class="refresh-btn" onclick="refreshData()">üîÑ Refresh</button>
            <div id="health-container">Loading...</div>
        </div>
        <div class="card">
            <h2>Performance Metrics</h2>
            <div id="metrics-container">Loading...</div>
        </div>
        <div class="card">
            <h2>Quick Actions</h2>
            <p>
                <a href="/metrics" target="_blank">üìä Raw Metrics (Prometheus)</a><br>
                <a href="/api/health" target="_blank">üè• Health API</a><br>
                <a href="/api/metrics" target="_blank">üìà Metrics API</a>
            </p>
        </div>
    </div>
</body>
</html>

